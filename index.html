<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LifePet v3.2 - Final Stable Edition</title>
    <style>
        :root { --p: #6c5ce7; --bg: #f0f2f5; --card: #ffffff; --gold: #f1c40f; --energy: #3498db; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; padding-bottom: 90px; color: #333; }
        
        /* Navigatie */
        .nav { position: fixed; bottom: 0; left: 0; right: 0; background: white; display: flex; justify-content: space-around; padding: 12px 0; box-shadow: 0 -5px 15px rgba(0,0,0,0.1); z-index: 1000; }
        .nav-item { text-align: center; color: #ccc; cursor: pointer; flex: 1; font-size: 11px; }
        .nav-item.active { color: var(--p); font-weight: bold; }
        
        /* Layout */
        .page { display: none; padding: 20px; }
        .page.active { display: block; }
        .card { background: white; padding: 15px; border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); margin-bottom: 15px; border: 1px solid #eee; position: relative; }
        
        /* Pet & Animatie */
        .pet-stage { height: 150px; display: flex; justify-content: center; align-items: center; position: relative; font-size: 80px; }
        .evolve-anim { animation: shakeBurst 1.2s ease-in-out; }
        @keyframes shakeBurst {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3) rotate(5deg); filter: brightness(1.2); }
        }

        .stat-bar { height: 10px; background: #eee; border-radius: 5px; overflow: hidden; margin: 10px 0; }
        .fill { height: 100%; background: var(--energy); transition: 0.3s; width: 100%; }
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .box { background: #f9f9f9; padding: 10px; border-radius: 15px; text-align: center; cursor: pointer; border: 1px solid #eee; }
        
        input[type="text"] { width: 100%; padding: 10px; border-radius: 10px; border: 1px solid #ddd; margin-bottom: 8px; box-sizing: border-box; }
        .btn { background: var(--p); color: white; border: none; padding: 12px; border-radius: 12px; font-weight: bold; width: 100%; cursor: pointer; }
        .overlay { position: fixed; inset: 0; background: white; z-index: 2000; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="setup-screen" class="overlay">
    <h2 style="color:var(--p)">Welkom bij LifePet</h2>
    <input type="text" id="setup-name" placeholder="Naam van je pet...">
    <p>Kies een dier:</p>
    <div class="grid" style="font-size: 30px; margin-bottom: 20px;">
        <div class="box" onclick="window.selT='dog';alert('Hond!')">ğŸ¶</div>
        <div class="box" onclick="window.selT='dragon';alert('Draak!')">ğŸ²</div>
        <div class="box" onclick="window.selT='cat';alert('Kat!')">ğŸ±</div>
    </div>
    <button class="btn" onclick="startApp()">START</button>
</div>

<div id="main-ui" class="hidden">
    <div id="p-status" class="page active">
        <div class="card" style="text-align: center;">
            <div id="growth-label" style="background:var(--p); color:white; font-size:10px; padding:2px 8px; border-radius:10px; display:inline-block;">Ei</div>
            <div class="pet-stage">
                <span id="ui-acc" style="position:absolute; top:10px; font-size:40px;"></span>
                <span id="ui-emoji">ğŸ¥š</span>
            </div>
            <h2 id="ui-name" style="margin:0">Pet</h2>
            <div style="text-align: left; margin-top: 15px;">
                <small>Energie âš¡</small>
                <div class="stat-bar"><div id="ui-energy" class="fill"></div></div>
            </div>
            <div style="background: var(--gold); color: white; padding: 10px; border-radius: 15px; font-weight: bold;">
                ğŸ’° <span id="ui-coins">0</span>
            </div>
        </div>
        <div class="card">
            <b>Rugzak (Klik om te eten):</b>
            <div id="ui-inv" class="grid" style="margin-top:10px;"></div>
        </div>
    </div>

    <div id="p-planner" class="page">
        <h3>ğŸ“… Weekschema</h3>
        <div class="card">
            <b>Maandag:</b> <input type="text" id="in-Maandag" placeholder="Bv: Lopen, Afwas">
            <b>Dinsdag:</b> <input type="text" id="in-Dinsdag">
            <b>Woensdag:</b> <input type="text" id="in-Woensdag">
            <b>Donderdag:</b> <input type="text" id="in-Donderdag">
            <b>Vrijdag:</b> <input type="text" id="in-Vrijdag">
            <b>Zaterdag:</b> <input type="text" id="in-Zaterdag">
            <b>Zondag:</b> <input type="text" id="in-Zondag">
            <button class="btn" onclick="save()">OPSLAAN</button>
        </div>
        <h4>Taken voor Vandaag</h4>
        <div id="ui-today"></div>
    </div>

    <div id="p-shop" class="page">
        <h3>ğŸ›ï¸ Winkel</h3>
        <div class="card">
            <p><b>Markt (Eten)</b></p>
            <div class="grid">
                <div class="box" onclick="buy('ğŸ', 10, false)">ğŸ<br><small>ğŸ’°10</small></div>
                <div class="box" onclick="buy('ğŸ•', 40, false)">ğŸ•<br><small>ğŸ’°40</small></div>
                <div class="box" onclick="buy('ğŸª', 5, false)">ğŸª<br><small>ğŸ’°5</small></div>
            </div>
        </div>
        <div class="card">
            <p><b>Boutique (Accessoires)</b></p>
            <div class="grid">
                <div class="box" onclick="buy('ğŸ©', 100, true)">ğŸ©<br><small>ğŸ’°100</small></div>
                <div class="box" onclick="buy('ğŸ‘‘', 500, true)">ğŸ‘‘<br><small>ğŸ’°500</small></div>
            </div>
        </div>
    </div>

    <div class="nav">
        <div class="nav-item active" onclick="nav('status', this)"><div>ğŸ¾</div>Status</div>
        <div class="nav-item" onclick="nav('planner', this)"><div>ğŸ“…</div>Planner</div>
        <div class="nav-item" onclick="nav('shop', this)"><div>ğŸ›ï¸</div>Winkel</div>
    </div>
</div>

<script>
    const DAYS = ["Zondag", "Maandag", "Dinsdag", "Woensdag", "Donderdag", "Vrijdag", "Zaterdag"];
    const EVOS = { dog: ["ğŸ¥š", "ğŸ¶", "ğŸ•"], dragon: ["ğŸ¥š", "ğŸ²", "ğŸ¦–"], cat: ["ğŸ¥š", "ğŸ±", "ğŸˆ"] };
    
    let st = JSON.parse(localStorage.getItem('lp_32')) || {
        init: false, name: "", type: "dog", coins: 0, energy: 100, inv: {}, plan: {}, done: [], acc: "", stage: "Ei"
    };

    function startApp() {
        const n = document.getElementById('setup-name').value;
        if(!n || !window.selT) return alert("Naam en dier kiezen!");
        st.name = n; st.type = window.selT; st.init = true;
        save(); render();
    }

    function nav(id, el) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById('p-' + id).classList.add('active');
        el.classList.add('active');
        render();
    }

    function buy(item, price, isAcc) {
        if(st.coins >= price) {
            st.coins -= price;
            if(isAcc) st.acc = item; else st.inv[item] = (st.inv[item] || 0) + 1;
            save(); render();
        } else alert("Te weinig munten!");
    }

    function save() {
        DAYS.forEach(d => {
            const input = document.getElementById('in-' + d);
            if(input) st.plan[d] = input.value.split(',').map(s => s.trim()).filter(s => s !== "");
        });
        localStorage.setItem('lp_32', JSON.stringify(st));
    }

    function doTask(t) {
        const key = t + new Date().toDateString();
        if(st.energy >= 10 && !st.done.includes(key)) {
            st.done.push(key); st.coins += 30; st.energy -= 10;
            save(); render();
        } else if(st.energy < 10) alert("Moe! Eet wat.");
    }

    function render() {
        if(!st.init) { document.getElementById('setup-screen').classList.remove('hidden'); return; }
        document.getElementById('setup-screen').classList.add('hidden');
        document.getElementById('main-ui').classList.remove('hidden');

        // Groei
        let curStage = "Ei"; 
        if(st.coins > 200) curStage = "Baby";
        if(st.coins > 800) curStage = "Volwassen";

        if(curStage !== st.stage) {
            document.getElementById('ui-emoji').classList.add('evolve-anim');
            setTimeout(() => document.getElementById('ui-emoji').classList.remove('evolve-anim'), 1200);
            st.stage = curStage;
        }

        const emoji = curStage === "Ei" ? EVOS[st.type][0] : (curStage === "Baby" ? EVOS[st.type][1] : EVOS[st.type][2]);
        
        document.getElementById('ui-emoji').innerText = emoji;
        document.getElementById('growth-label').innerText = curStage;
        document.getElementById('ui-name').innerText = st.name;
        document.getElementById('ui-coins').innerText = st.coins;
        document.getElementById('ui-energy').style.width = st.energy + "%";
        document.getElementById('ui-acc').innerText = st.acc;

        // Sync inputs
        DAYS.forEach(d => { if(document.getElementById('in-'+d)) document.getElementById('in-'+d).value = (st.plan[d] || []).join(', '); });

        // Today
        const tDiv = document.getElementById('ui-today'); tDiv.innerHTML = "";
        const today = DAYS[new Date().getDay()];
        (st.plan[today] || []).forEach(t => {
            const isDone = st.done.includes(t + new Date().toDateString());
            tDiv.innerHTML += `<div class="card" onclick="doTask('${t}')" style="opacity:${isDone?0.5:1}"><b>${t}</b> ${isDone?'âœ…':'+ğŸ’°30'}</div>`;
        });

        // Inv
        const iDiv = document.getElementById('ui-inv'); iDiv.innerHTML = "";
        for(let k in st.inv) if(st.inv[k] > 0) iDiv.innerHTML += `<div class="box" onclick="st.inv['${k}']--; st.energy=Math.min(100,st.energy+25); save(); render();">${k}<br><small>x${st.inv[k]}</small></div>`;
    }

    render();
</script>
</body>
</html>
