<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LifePet v2.0 - Offline Only</title>
    <style>
        :root { --p: #6c5ce7; --bg: #f0f2f5; --card: #ffffff; --gold: #f1c40f; --energy: #3498db; --red: #ff7675; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; padding-bottom: 90px; color: #333; }
        .nav { position: fixed; bottom: 0; left: 0; right: 0; background: white; display: flex; justify-content: space-around; padding: 15px 0; box-shadow: 0 -5px 15px rgba(0,0,0,0.1); z-index: 1000; }
        .nav-item { text-align: center; color: #ccc; cursor: pointer; flex: 1; font-size: 12px; }
        .nav-item.active { color: var(--p); font-weight: bold; }
        .page { display: none; padding: 20px; animation: fadeIn 0.2s; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .card { background: white; padding: 20px; border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); margin-bottom: 15px; }
        .btn { background: var(--p); color: white; border: none; padding: 12px; border-radius: 12px; font-weight: bold; width: 100%; cursor: pointer; }
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .box { background: #f9f9f9; padding: 15px; border-radius: 15px; text-align: center; cursor: pointer; border: 2px solid transparent; }
        .box.selected { border-color: var(--p); background: #f3f0ff; }
        .stat-bar { height: 10px; background: #eee; border-radius: 5px; overflow: hidden; margin: 10px 0; }
        .fill { height: 100%; background: var(--energy); transition: 0.3s; }
        input { width: 100%; padding: 10px; border-radius: 10px; border: 1px solid #ddd; box-sizing: border-box; margin-bottom: 10px; }
        .overlay { position: fixed; inset: 0; background: white; z-index: 2000; display: flex; align-items: center; justify-content: center; padding: 20px; flex-direction: column; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="setup" class="overlay hidden">
    <h2 style="color:var(--p)">Welkom bij LifePet</h2>
    <p>Kies je maatje om te beginnen</p>
    <input type="text" id="pet-name" placeholder="Naam van je pet...">
    <div class="grid" style="font-size: 40px; margin: 20px 0;">
        <div class="box" onclick="selectEmoji('ğŸ¶', this)">ğŸ¶</div>
        <div class="box" onclick="selectEmoji('ğŸ±', this)">ğŸ±</div>
        <div class="box" onclick="selectEmoji('ğŸ²', this)">ğŸ²</div>
        <div class="box" onclick="selectEmoji('ğŸ¦„', this)">ğŸ¦„</div>
        <div class="box" onclick="selectEmoji('ğŸ¼', this)">ğŸ¼</div>
        <div class="box" onclick="selectEmoji('ğŸ¦Š', this)">ğŸ¦Š</div>
    </div>
    <button class="btn" onclick="startApp()">START AVONTUUR</button>
</div>

<div id="main-ui">
    <div id="p-status" class="page active">
        <div class="card" style="text-align: center;">
            <div id="view-emoji" style="font-size: 100px; margin: 20px 0;">ğŸ¾</div>
            <h2 id="view-name" style="margin:0">Pet</h2>
            <div style="text-align: left; margin-top: 20px;">
                <small>Energie âš¡</small>
                <div class="stat-bar"><div id="bar-e" class="fill" style="width: 100%;"></div></div>
            </div>
            <div style="background: var(--gold); color: white; padding: 12px; border-radius: 15px; font-weight: bold; margin-top: 10px;">
                ğŸ’° <span id="view-coins">0</span> Munten
            </div>
        </div>
        <div class="card">
            <b>Je Voorraadkast:</b>
            <div id="view-inv" class="grid" style="margin-top: 10px;"></div>
        </div>
    </div>

    <div id="p-planner" class="page">
        <h3>ğŸ“… Weekschema</h3>
        <div id="planner-inputs"></div>
        <button class="btn" onclick="saveData()">OPSLAAN</button>
        <hr>
        <h4>Taken van Vandaag</h4>
        <div id="today-tasks"></div>
    </div>

    <div id="p-shop" class="page">
        <h3>ğŸ›ï¸ De Markt</h3>
        <div class="card">
            <p><b>Eten & Drinken</b></p>
            <div class="grid">
                <div class="box" onclick="buy('apple', 10, 'ğŸ')">ğŸ<br><small>ğŸ’°10</small></div>
                <div class="box" onclick="buy('pizza', 40, 'ğŸ•')">ğŸ•<br><small>ğŸ’°40</small></div>
                <div class="box" onclick="buy('cookie', 5, 'ğŸª')">ğŸª<br><small>ğŸ’°5</small></div>
            </div>
        </div>
        <p style="font-size: 12px; color: #888; text-align: center;">Meer items komen binnenkort!</p>
    </div>

    <div class="nav">
        <div class="nav-item active" onclick="nav('status', this)"><div>ğŸ¾</div>Status</div>
        <div class="nav-item" onclick="nav('planner', this)"><div>ğŸ“…</div>Planner</div>
        <div class="nav-item" onclick="nav('shop', this)"><div>ğŸ›ï¸</div>Winkel</div>
    </div>
</div>

<script>
    const DAYS = ["Zondag", "Maandag", "Dinsdag", "Woensdag", "Donderdag", "Vrijdag", "Zaterdag"];
    let state = JSON.parse(localStorage.getItem('lifepet_v2')) || {
        setup: false,
        name: "",
        emoji: "ğŸ¾",
        coins: 100,
        energy: 100,
        inventory: {},
        schedule: {},
        completed: []
    };

    let tempEmoji = "";

    function selectEmoji(e, el) {
        tempEmoji = e;
        document.querySelectorAll('.box').forEach(b => b.classList.remove('selected'));
        el.classList.add('selected');
    }

    function startApp() {
        const name = document.getElementById('pet-name').value;
        if(!name || !tempEmoji) return alert("Vul een naam in en kies een dier!");
        state.name = name;
        state.emoji = tempEmoji;
        state.setup = true;
        saveData();
        document.getElementById('setup').classList.add('hidden');
        render();
    }

    function nav(id, el) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById('p-' + id).classList.add('active');
        el.classList.add('active');
        render();
    }

    function buy(id, price, icon) {
        if(state.coins >= price) {
            state.coins -= price;
            state.inventory[icon] = (state.inventory[icon] || 0) + 1;
            saveData();
            render();
        } else { alert("Niet genoeg munten!"); }
    }

    function feed(icon) {
        if(state.inventory[icon] > 0) {
            state.inventory[icon]--;
            state.energy = Math.min(100, state.energy + 20);
            saveData();
            render();
        }
    }

    function completeTask(task) {
        const key = task + new Date().toDateString();
        if(state.energy >= 10 && !state.completed.includes(key)) {
            state.completed.push(key);
            state.coins += 20;
            state.energy -= 10;
            saveData();
            render();
        } else if(state.energy < 10) { alert("Je pet is te moe! Geef hem eten."); }
    }

    function saveData() {
        if(state.setup) {
            DAYS.forEach(d => {
                const el = document.getElementById('in-' + d);
                if(el) state.schedule[d] = el.value.split(',').map(s => s.trim()).filter(s => s !== "");
            });
        }
        localStorage.setItem('lifepet_v2', JSON.stringify(state));
    }

    function render() {
        if(!state.setup) {
            document.getElementById('setup').classList.remove('hidden');
            return;
        }

        document.getElementById('view-name').innerText = state.name;
        document.getElementById('view-emoji').innerText = state.emoji;
        document.getElementById('view-coins').innerText = state.coins;
        document.getElementById('bar-e').style.width = state.energy + "%";

        // Render Planner Inputs
        const pInput = document.getElementById('planner-inputs');
        if(pInput.innerHTML === "") {
            DAYS.forEach(d => {
                const val = state.schedule[d] ? state.schedule[d].join(', ') : "";
                pInput.innerHTML += `<div><b>${d}</b><input type="text" id="in-${d}" value="${val}" placeholder="Bv: Wandelen, Afwassen"></div>`;
            });
        }

        // Render Today's Tasks
        const today = DAYS[new Date().getDay()];
        const tDiv = document.getElementById('today-tasks');
        tDiv.innerHTML = "";
        (state.schedule[today] || []).forEach(t => {
            const done = state.completed.includes(t + new Date().toDateString());
            tDiv.innerHTML += `<div class="card" onclick="completeTask('${t}')" style="opacity:${done?0.5:1}"><b>${t}</b> ${done ? 'âœ…' : 'ğŸ’°'}</div>`;
        });

        // Render Inventory
        const iDiv = document.getElementById('view-inv');
        iDiv.innerHTML = "";
        for(let icon in state.inventory) {
            if(state.inventory[icon] > 0) {
                iDiv.innerHTML += `<div class="box" onclick="feed('${icon}')">${icon}<br><small>x${state.inventory[icon]}</small></div>`;
            }
        }
    }

    // Initial Start
    render();
</script>
</body>
</html>
